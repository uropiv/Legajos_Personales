<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Ingreso al Sistema</title>
</head>
<body>

<h2>Registro</h2>
<input id="reg-email" placeholder="Email">
<input id="reg-pass" type="password" placeholder="ContraseÃ±a">
<button id="btn-registrar">Registrarse</button>

<hr>

<h2>Login</h2>
<input id="log-email" placeholder="Email">
<input id="log-pass" type="password" placeholder="ContraseÃ±a">
<button id="btn-login">Ingresar</button>

<p id="msg"></p>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
  // ðŸ‘‡ ESTA VARIABLE SE DECLARA UNA SOLA VEZ
  const supabase = supabaseJs.createClient(
    "https://otehkbvjoxxdikfrlldj.supabase.co",
    "sb_publishable_M2pH2HrqRmYEXxgGAnMdRg_Y_7gupVv"
  );

  // REGISTRO
  document.getElementById("btn-registrar").addEventListener("click", async () => {
    const email = document.getElementById("reg-email").value;
    const pass = document.getElementById("reg-pass").value;

    const { error } = await supabase.auth.signUp({
      email,
      password: pass
    });

    document.getElementById("msg").innerText =
      error ? error.message : "Registro exitoso";
  });

  // LOGIN
  document.getElementById("btn-login").addEventListener("click", async () => {
    const email = document.getElementById("log-email").value;
    const pass = document.getElementById("log-pass").value;

    const { error } = await supabase.auth.signInWithPassword({
      email,
      password: pass
    });

    document.getElementById("msg").innerText =
      error ? error.message : "Login correcto";
  });
</script>

</body>
</html>
