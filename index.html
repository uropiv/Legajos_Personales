<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Ingreso al Sistema</title>
  <link rel="icon" href="data:,">
</head>
<body>

<h2>Registro (solo pruebas)</h2>
<input id="reg-email" placeholder="Email">
<input id="reg-pass" type="password" placeholder="Contraseña">
<button onclick="registrar()">Registrarse</button>

<hr>

<h2>Login</h2>
<input id="log-email" placeholder="Email">
<input id="log-pass" type="password" placeholder="Contraseña">
<button onclick="login()">Ingresar</button>

<hr>

<h2>Login serio</h2>
<button onclick="loginGoogle()">Ingresar con Google</button>

<p id="msg"></p>

<!-- SUPABASE V2 CDN -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>

<script>
/* crear cliente Supabase */
const client = supabase.createClient(
  "https://otehkbvjoxxdikfrlldj.supabase.co",
  "sb_publishable_M2pH2HrqRmYEXxgGAnMdRg_Y_7gupVv"
);

/* REGISTRO (solo para pruebas) */
async function registrar() {
  const email = document.getElementById("reg-email").value.trim();
  const pass = document.getElementById("reg-pass").value.trim();

  if (!email || !pass) {
    msg("Completa todos los campos");
    return;
  }

  if (pass.length < 6) {
    msg("La contraseña debe tener al menos 6 caracteres");
    return;
  }

  const { error } = await client.auth.signUp({ email, password: pass });
  msg(error ? error.message : "Registro exitoso");
}

/* LOGIN EMAIL (backup) */
async function login() {
  const email = document.getElementById("log-email").value.trim();
  const pass = document.getElementById("log-pass").value.trim();

  if (!email || !pass) {
    msg("Completa todos los campos");
    return;
  }

  const { error } = await client.auth.signInWithPassword({
    email,
    password: pass
  });

  msg(error ? error.message : "Login correcto");
}

/* LOGIN CON GOOGLE */
async function loginGoogle() {
  const { error } = await client.auth.signInWithOAuth({
    provider: "google",
    options: {
      redirectTo: window.location.href
    }
  });

  if (error) {
    msg(error.message);
  }
}

/* helper mensaje */
function msg(texto) {
  document.getElementById("msg").innerText = texto;
}
</script>

</body>
</html>
